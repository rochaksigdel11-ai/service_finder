<!-- partials/navbar.html -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="{% url 'IntroHome' %}">
            <i class="fas fa-tools me-2"></i>Service Finder
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="#navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">

                <!-- SEARCH FOR ALL AUTHENTICATED USERS -->
                {% if user.is_authenticated %}
                <li class="nav-item">
                    <a href="{% url 'search_services' %}" class="nav-link text-white">
                        <i class="fas fa-search me-1"></i> Find Services
                    </a>
                </li>
                {% endif %}

                <!-- ROLE-BASED BUTTONS -->
                {% if user.is_authenticated %}
                    {% if user.userprofile.role == 'customer' %}
                        <li class="nav-item">
                            <a href="{% url 'become_freelancer' %}" class="btn btn-warning btn-sm mx-2">
                                <i class="fas fa-rocket me-1"></i> Become a Freelancer
                            </a>
                        </li>
                    {% elif user.userprofile.role == 'freelancer' %}
                        <li class="nav-item">
                            <a href="{% url 'create_job_profile' user.username %}" class="btn btn-success btn-sm mx-2">
                                <i class="fas fa-plus-circle me-1"></i> Create Gig
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'freelancer_bookings' %}" class="btn btn-info btn-sm mx-2">
                                <i class="fas fa-clipboard-list me-1"></i> My Orders
                            </a>
                        </li>
                    {% elif user.userprofile.role == 'admin' %}
                        <li class="nav-item">
                            <a href="/admin/" class="btn btn-danger btn-sm mx-2">
                                <i class="fas fa-crown me-1"></i> Admin Panel
                            </a>
                        </li>
                    {% endif %}

                    <!-- PROFILE DROPDOWN -->
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle d-flex align-items-center text-white" href="#" role="button" data-bs-toggle="dropdown">
        <img src="{% if user.userprofile.profile_image %}{{ user.userprofile.profile_image.url }}{% else %}https://ui-avatars.com/api/?name={{ user.username }}&background=4361ee&color=fff{% endif %}"
             class="rounded-circle me-2" width="32" height="32" alt="Profile">
        {{ user.username }}
    </a>
    <ul class="dropdown-menu dropdown-menu-end">
        {% if user.userprofile.role == 'freelancer' %}
            <li><a class="dropdown-item" href="{% url 'seller_dashboard' user.username %}">Dashboard</a></li>
        {% endif %}
        <li><a class="dropdown-item" href="{% url 'view_profile_public' user.username %}">View Profile</a></li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <form method="post" action="{% url 'logout' %}" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="dropdown-item text-danger" style="background:none;border:none;padding:0.5rem 1rem;cursor:pointer;width:100%;text-align:left;">
                    <i class="fas fa-sign-out-alt me-2"></i> Logout
                </button>
            </form>
        </li>
    </ul>
</li>